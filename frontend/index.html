<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Traffic Sim</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="/style.css" rel="stylesheet">
</head>
<body>
<div id="loader">
    <div class="spinner"></div>
    <p>Загрузка...</p>
</div>


<canvas class="game" style="display: none;"></canvas>

<!-- HUD overlay -->
<div class="hud">

    <button class="fab fab--pause" id="pauseBtn" aria-pressed="false" title="Пауза (Space)">
        <!-- оба svg внутри; показываем нужный через CSS -->
        <svg class="i i-play" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M8 5v14l11-7L8 5z"/>
        </svg>
        <svg class="i i-pause" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M6 5h4v14H6zM14 5h4v14h-4z"/>
        </svg>
    </button>
    <button class="fab fab--restart" id="restartBtn" title="Рестарт">
        <svg class="i i-restart" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 5V2L7 6l5 4V7c3.3 0 6 2.7 6 6 0 1-.3 1.9-.8 2.7l1.5 1.3C19.6 16 20 14.8 20 13.5 20 9.9 16.9 7 13 7h-1zM6.8 9.3 5.3 8C4.4 9.2 4 10.5 4 11.8 4 15.4 7.1 18.3 11 18.3h1v3l5-4-5-4v3h-1c-3.3 0-6-2.5-6-5.5 0-.9.3-1.8.8-2.5z"/>
        </svg>
    </button>

    <div class="hud-stack">
        <!-- Настройки -->
        <details class="panel panel--settings" id="panel-settings" open>
            <summary class="panel__header">
                <span class="panel__title">Настройки</span>
                <span class="panel__icons">
        <svg viewBox="0 0 24 24" aria-hidden="true" class="i-gear"><path
                d="M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm9.4 3.2-1.8-.3a7.4 7.4 0 0 0-.7-1.7l1.1-1.4a.7.7 0 0 0-.1-.9l-1.5-1.5a.7.7 0 0 0-.9-.1l-1.4 1.1c-.5-.3-1.1-.5-1.7-.7l-.3-1.8a.7.7 0 0 0-.7-.6h-2.1a.7.7 0 0 0-.7.6l-.3 1.8c-.6.1-1.2.4-1.7.7L6.4 4.9a.7.7 0 0 0-.9.1L4 6.5a.7.7 0 0 0-.1.9l1.1 1.4c-.3.5-.5 1.1-.7 1.7l-1.8.3a.7.7 0 0 0-.6.7v2.1c0 .3.3.6.6.7l1.8.3c.1.6.4 1.2.7 1.7l-1.1 1.4a.7.7 0 0 0 .1.9l1.5 1.5a.7.7 0 0 0 .9.1l1.4-1.1c.5.3 1.1.5 1.7.7l.3 1.8c0 .3.3.6.7.6h2.1c.3 0 .6-.3.7-.6l.3-1.8c.6-.1 1.2-.4 1.7-.7l1.4 1.1c.3.2.7.2.9-.1l1.5-1.5c.2-.3.2-.7-.1-.9l-1.1-1.4c.3-.5.5-1.1.7-1.7l1.8-.3c.3 0 .6-.3.6-.7v-2.1c0-.3-.3-.6-.6-.7Z"/></svg>
        <span class="chevron" aria-hidden="true"></span>
      </span>
            </summary>
            <div class="panel__body">
                <label class="row row--range">
                    <span>Скорость</span>
                    <input type="range" min="0.25" max="10" step="0.05" value="1" id="speed">
                    <output id="speedOut">×1.00</output>
                </label>

                <label class="row row--range">
                    <span>Интервал появления машин</span>
                    <input type="range" min="0.5" max="5" step="0.5" value="1.5" id="density">
                    <output id="densityOut">1.5s</output>
                </label>

                <!-- РЕЖИМ СВЕТОФОРА -->
                <fieldset class="row row--radioList">
                    <legend>Режим светофора</legend>

                    <label class="radio">
                        <input type="radio" name="tlMode" value="mode1" checked>
                        <span class="radio__dot" aria-hidden="true"></span>
                        <span class="radio__label">Первый</span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="tlMode" value="mode2">
                        <span class="radio__dot" aria-hidden="true"></span>
                        <span class="radio__label">Второй</span>
                    </label>
                </fieldset>

            </div>
        </details>

        <!-- Статистика -->
        <details class="panel panel--stats" id="panel-stats" open>
            <summary class="panel__header">
                <span class="panel__title">Статистика</span>
                <span class="panel__icons">
        <svg viewBox="0 0 24 24" aria-hidden="true" class="i-bars"><path
                d="M4 20h2V10H4v10Zm7 0h2V4h-2v16Zm7 0h2v-7h-2v7Z"/></svg>
        <span class="chevron" aria-hidden="true"></span>
      </span>
            </summary>
            <div class="panel__body panel__body--stats">
                <dl class="stats">
                    <div class="stat">
                        <dt>Машин заехало</dt>
                        <dd id="carsIn">0</dd>
                    </div>
                    <div class="stat">
                        <dt>Машин выехало</dt>
                        <dd id="carsOut">0</dd>
                    </div>
                    <div class="stat">
                        <dt>Прошло секунд</dt>
                        <dd id="sec">0</dd>
                    </div>
                    <div class="stat">
                        <dt>Среднее время жизни</dt>
                        <dd id="avgLife">0</dd>
                    </div>
                </dl>


            </div>
        </details>
        <details class="panel panel--camera" id="panel-camera" open>
            <summary class="panel__header">
                <span class="panel__title">Камера</span>
                <span class="panel__icons">
                    <svg viewBox="0 0 24 24" aria-hidden="true" class="i-gear">
                        <path d="M4 7h4l2-3h4l2 3h4v11H4zM6 10v6h12v-6z"/>
                    </svg>
                    <span class="chevron" aria-hidden="true"></span>
                </span>
            </summary>
            <div class="panel__body panel__body--camera">
                <!-- выбор траектории -->
                <label class="row">
                    <span>Траектория</span>
                    <select id="camPath">
                        <option value="none">Нет траектории</option>
                        <option value="xyOrbit">Орбита XY</option>
                        <option value="xyzOrbit">Орбита XYZ</option>
                    </select>
                </label>



                <!-- чекбокс "постоянное движение" -->
                <label class="row row--checkbox" id="camContinuousRow">
                    <span>Постоянное движение</span>
                    <input type="checkbox" id="camContinuous">
                </label>

                <!-- ручное перемещение по траектории -->
                <label class="row row--range" id="camManualRow">
                    <span>Позиция</span>
                    <input type="range" min="0" max="1" step="0.01" value="0" id="camManual">
                    <output id="camManualOut">0%</output>
                </label>

                <!-- скорость автоматического движения -->
                <label class="row row--range" id="camSpeedRow">
                    <span>Скорость</span>
                    <input type="range" min="0.05" max="1.5" step="0.05" value="0.25" id="camSpeed">
                    <output id="camSpeedOut">×0.25</output>
                </label>
            </div>
        </details>
    </div>
</div>


<script type="module" src="/src/main.js"></script>

</body>
</html>
